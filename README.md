# Vizier - a tool for visualising a JSON Dataset

### What it does

The vizier script helps a user explore a time based dataset. The dataset should contain a number of rows with a series of values for time points. For example a sporting league would have the points gained for each team per season. Also teams can be promoted and relegated. The sample data used is from the [English Premier League](https://www.premierleague.com/) scraped from the internet.

We can view the data in 2 ways

1/ An animation of the top ten entries in the dataset through time. Entries are floated up or down as required.

2/ A chart comparing up to three rows through time

Authors can distribute a dataset for exploring without needing to post it to a public repository.

Click [here] (https://wapringle.github.io/vizier/index.html?input=~'Hdkfm%60vq%60w%25Pklq%60a'%3F%25~'7544'%3F%25'%3D5')%25'7547'%3F%25'%3D%3C')%25'7546'%3F%25'%3D%3C')%25'7541'%3F%25'31')%25'7540'%3F%25'25')%25'7543'%3F%25'33')%25'7542'%3F%25'3%3C')%25'754%3D'%3F%25'%3D4')%25'754%3C'%3F%25'33')%25'7575'%3F%25'33')%25'7574'%3F%25'21')%25'7577'%3F%25'0%3D'x)%25'Fm%60iv%60d'%3F%25~'7544'%3F%25'24')%25'7547'%3F%25'31')%25'7546'%3F%25'20')%25'7541'%3F%25'%3D7')%25'7540'%3F%25'%3D2')%25'7543'%3F%25'05')%25'7542'%3F%25'%3C6')%25'754%3D'%3F%25'25')%25'754%3C'%3F%25'27')%25'7575'%3F%25'33')%25'7574'%3F%25'32')%25'7577'%3F%25'21'x)%25'Hdkfm%60vq%60w%25Flq%7C'%3F%25~'7544'%3F%25'24')%25'7547'%3F%25'%3D%3C')%25'7546'%3F%25'2%3D')%25'7541'%3F%25'%3D3')%25'7540'%3F%25'2%3C')%25'7543'%3F%25'33')%25'7542'%3F%25'2%3D')%25'754%3D'%3F%25'455')%25'754%3C'%3F%25'%3C%3D')%25'7575'%3F%25'%3D4')%25'7574'%3F%25'%3D3')%25'7577'%3F%25'%3C6'x)%25'Dwv%60kdi'%3F%25~'7544'%3F%25'3%3D')%25'7547'%3F%25'25')%25'7546'%3F%25'26')%25'7541'%3F%25'2%3C')%25'7540'%3F%25'20')%25'7543'%3F%25'24')%25'7542'%3F%25'20')%25'754%3D'%3F%25'36')%25'754%3C'%3F%25'25')%25'7575'%3F%25'03')%25'7574'%3F%25'34')%25'7577'%3F%25'3%3C'x)%25'Qjqq%60kmdh%25Mjqvupw'%3F%25~'7544'%3F%25'37')%25'7547'%3F%25'3%3C')%25'7546'%3F%25'27')%25'7541'%3F%25'3%3C')%25'7540'%3F%25'31')%25'7543'%3F%25'25')%25'7542'%3F%25'%3D3')%25'754%3D'%3F%25'22')%25'754%3C'%3F%25'24')%25'7575'%3F%25'0%3C')%25'7574'%3F%25'37')%25'7577'%3F%25'24'x)%25'Ils%60wujji'%3F%25~'7544'%3F%25'0%3D')%25'7547'%3F%25'07')%25'7546'%3F%25'34')%25'7541'%3F%25'%3D1')%25'7540'%3F%25'37')%25'7543'%3F%25'35')%25'7542'%3F%25'23')%25'754%3D'%3F%25'20')%25'754%3C'%3F%25'%3C2')%25'7575'%3F%25'%3C%3C')%25'7574'%3F%25'3%3C')%25'7577'%3F%25'%3C7'x)%25'%40s%60wqjk'%3F%25~'7544'%3F%25'01')%25'7547'%3F%25'03')%25'7546'%3F%25'36')%25'7541'%3F%25'27')%25'7540'%3F%25'12')%25'7543'%3F%25'12')%25'7542'%3F%25'34')%25'754%3D'%3F%25'1%3C')%25'754%3C'%3F%25'01')%25'7575'%3F%25'1%3C')%25'7574'%3F%25'0%3C')%25'7577'%3F%25'6%3C'x)%25'Cpimdh'%3F%25~'7544'%3F%25'1%3C')%25'7547'%3F%25'07')%25'7546'%3F%25'16')%25'7541'%3F%25'67')%25'754%3C'%3F%25'73')%25'7574'%3F%25'7%3D'x)%25'Dvqjk%25Sliid'%3F%25~'7544'%3F%25'1%3D')%25'7547'%3F%25'6%3D')%25'7546'%3F%25'14')%25'7541'%3F%25'6%3D')%25'7540'%3F%25'6%3D')%25'7543'%3F%25'42')%25'7575'%3F%25'60')%25'7574'%3F%25'00')%25'7577'%3F%25'10'x)%25'Vpka%60widka'%3F%25~'7544'%3F%25'12')%25'7547'%3F%25'10')%25'7546'%3F%25'6%3C')%25'7541'%3F%25'6%3D')%25'7540'%3F%25'6%3D')%25'7543'%3F%25'6%3C')%25'7542'%3F%25'71'x)%25'R%60vq%25Gwjhrlfm%25Digljk'%3F%25~'7544'%3F%25'12')%25'7547'%3F%25'12')%25'7546'%3F%25'1%3C')%25'7541'%3F%25'63')%25'7540'%3F%25'11')%25'7543'%3F%25'16')%25'7542'%3F%25'10')%25'754%3D'%3F%25'64')%25'7574'%3F%25'73'x)%25'K%60rfdvqi%60%25Pklq%60a'%3F%25~'7544'%3F%25'13')%25'7547'%3F%25'30')%25'7546'%3F%25'14')%25'7541'%3F%25'1%3C')%25'7540'%3F%25'6%3C')%25'7543'%3F%25'62')%25'754%3D'%3F%25'11')%25'754%3C'%3F%25'10')%25'7575'%3F%25'11')%25'7574'%3F%25'10')%25'7577'%3F%25'1%3C'x)%25'Vqjn%60%25Flq%7C'%3F%25~'7544'%3F%25'13')%25'7547'%3F%25'10')%25'7546'%3F%25'17')%25'7541'%3F%25'05')%25'7540'%3F%25'01')%25'7543'%3F%25'04')%25'7542'%3F%25'11')%25'754%3D'%3F%25'66'x)%25'Gjiqjk%25Rdka%60w%60wv'%3F%25~'7544'%3F%25'13')%25'7547'%3F%25'63'x)%25'Gidfngpwk%25Wjs%60wv'%3F%25~'7544'%3F%25'16')%25'7547'%3F%25'64'x)%25'Rlbdk%25Dqmi%60qlf'%3F%25~'7544'%3F%25'17')%25'7547'%3F%25'16')%25'7546'%3F%25'63'x)%25'Rjis%60wmdhuqjk%25Rdka%60w%60wv'%3F%25~'7544'%3F%25'15')%25'7547'%3F%25'70')%25'754%3C'%3F%25'02')%25'7575'%3F%25'0%3C')%25'7574'%3F%25'10')%25'7577'%3F%25'04'x)%25'Glwhlkbmdh%25Flq%7C'%3F%25~'7544'%3F%25'6%3C'x)%25'Gidfnujji'%3F%25~'7544'%3F%25'6%3C'x)%25'R%60vq%25Mdh%25Pklq%60a'%3F%25~'7544'%3F%25'66')%25'7546'%3F%25'13')%25'7541'%3F%25'15')%25'7540'%3F%25'12')%25'7543'%3F%25'37')%25'7542'%3F%25'10')%25'754%3D'%3F%25'17')%25'754%3C'%3F%25'07')%25'7575'%3F%25'6%3C')%25'7574'%3F%25'30')%25'7577'%3F%25'03'x)%25'Vrdkv%60d%25Flq%7C'%3F%25~'7547'%3F%25'12')%25'7546'%3F%25'13')%25'7541'%3F%25'17')%25'7540'%3F%25'03')%25'7543'%3F%25'12')%25'7542'%3F%25'14')%25'754%3D'%3F%25'66'x)%25'Kjwrlfm%25Flq%7C'%3F%25~'7547'%3F%25'12')%25'7546'%3F%25'11')%25'7541'%3F%25'66')%25'7543'%3F%25'61')%25'7575'%3F%25'74')%25'7577'%3F%25'77'x)%25'Tp%60%60kv%25Udwn%25Wdkb%60wv'%3F%25~'7547'%3F%25'62')%25'7546'%3F%25'70')%25'7540'%3F%25'65'x)%25'Vjpqmdhuqjk'%3F%25~'7546'%3F%25'14')%25'7541'%3F%25'03')%25'7540'%3F%25'35')%25'7543'%3F%25'36')%25'7542'%3F%25'13')%25'754%3D'%3F%25'63')%25'754%3C'%3F%25'6%3C')%25'7575'%3F%25'07')%25'7574'%3F%25'16')%25'7577'%3F%25'15'x)%25'W%60dalkb'%3F%25~'7546'%3F%25'7%3D'x)%25'Fw%7Cvqdi%25Udidf%60'%3F%25~'7541'%3F%25'10')%25'7540'%3F%25'1%3D')%25'7543'%3F%25'17')%25'7542'%3F%25'14')%25'754%3D'%3F%25'11')%25'754%3C'%3F%25'1%3C')%25'7575'%3F%25'16')%25'7574'%3F%25'11')%25'7577'%3F%25'1%3D'x)%25'Mpii%25Flq%7C'%3F%25~'7541'%3F%25'62')%25'7540'%3F%25'60')%25'7542'%3F%25'61'x)%25'Fdwalcc%25Flq%7C'%3F%25~'7541'%3F%25'65')%25'754%3C'%3F%25'61'x)%25'I%60lf%60vq%60w%25Flq%7C'%3F%25~'7540'%3F%25'14')%25'7543'%3F%25'%3D4')%25'7542'%3F%25'11')%25'754%3D'%3F%25'12')%25'754%3C'%3F%25'07')%25'7575'%3F%25'37')%25'7574'%3F%25'33')%25'7577'%3F%25'07'x)%25'Gpwki%60%7C'%3F%25~'7540'%3F%25'66')%25'7542'%3F%25'15')%25'754%3D'%3F%25'01')%25'754%3C'%3F%25'15')%25'7575'%3F%25'01')%25'7574'%3F%25'6%3C')%25'7577'%3F%25'60'x)%25'Rdqcjwa'%3F%25~'7543'%3F%25'10')%25'7542'%3F%25'15')%25'754%3D'%3F%25'14')%25'754%3C'%3F%25'05')%25'7575'%3F%25'61')%25'7577'%3F%25'76'x)%25'Gjpwk%60hjpqm'%3F%25~'7543'%3F%25'17')%25'7542'%3F%25'13')%25'754%3D'%3F%25'11')%25'754%3C'%3F%25'10')%25'7575'%3F%25'61'x)%25'Hlaai%60vgwjpbm'%3F%25~'7542'%3F%25'7%3D'x)%25'Gwlbmqjk%25%23%25Mjs%60%25Digljk'%3F%25~'754%3D'%3F%25'15')%25'754%3C'%3F%25'63')%25'7575'%3F%25'14')%25'7574'%3F%25'14')%25'7577'%3F%25'04'x)%25'Mpaa%60wvcl%60ia%25Qjrk'%3F%25~'754%3D'%3F%25'62')%25'754%3C'%3F%25'43'x)%25'Vm%60ccl%60ia%25Pklq%60a'%3F%25~'7575'%3F%25'01')%25'7574'%3F%25'76'x)%25'I%60%60av%25Pklq%60a'%3F%25~'7574'%3F%25'0%3C')%25'7577'%3F%25'6%3D'x)%25'Gw%60kqcjwa'%3F%25~'7577'%3F%25'13'xx) to see the script in action

### Usage
 There are four ways a dataset can be passed to the  script
 
 1. with dataset reference on command line
 https://wapringle.github.io/vizier/index.html?file=premier_league.json
 
 2. Upload from local directory
 https://wapringle.github.io/vizier/index.html, then [choose file]
 
 3. with the dateset within the URL
 If the json dataset is < 8K it can be appended to the URL. There is an an option in the script to do this. The url can be easily distributed. The sample link above is created this way
 
 4. with the the dataset included in a webpage wrapper
 
For use with larger datasets. There is an option to generate an html file that includes the dataset and is downloaded to he user. Click on the file and it in turn loads the vizier script, passing over the dataset and control to the script. This html file  can be included in emails etc as an attachment. An example is  https://wapringle.github.io/vizier/premier_league.html 
 
### Life Cycle 

- Author creates json dataset, possibly using pandas and saves to local directory.
- Clicks on https://wapringle.github.io/vizier/index.html 
- Uses "Choose File" button to upload json dataset to webpage.
- Explores dataset. Makes any adjustments and repeats.
- Makes a URL (small file) or html file for posting on weblogs, email etc and publishes it.
- recipient clicks on link to explore dataset 
- Note that author has not needed to upload dataset to publically acesssible repository, it is more like sharing a picture in whatsApp

### Data Format
The dataset is a dictionary saved as a json file, each row is a is in turn a dictionary of
key,value pairs. There may be gaps in the table. 





```python
import pandas as pd
import json
```


```python
dataset={'Liverpool': {'2011': '58', '2012': '52', '2013': '61', '2014': '84', '2015': '62', '2016': '60', '2017': '76',
                       '2018': '75', '2019': '97', '2020': '99', '2021': '69', '2022': '92'},
          'Queens Park Rangers': {'2012': '37', '2013': '25', '2015': '30'},
        }
```

Make a json version of the dataset


```python
with open('mpl.json','w') as f: json.dump(dataset,f)
```

Now a pandas version


```python
j_data=json.dumps(dataset)

pd_data=pd.read_json(j_data).T
pd_data
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Liverpool</th>
      <td>58.0</td>
      <td>52.0</td>
      <td>61.0</td>
      <td>84.0</td>
      <td>62.0</td>
      <td>60.0</td>
      <td>76.0</td>
      <td>75.0</td>
      <td>97.0</td>
      <td>99.0</td>
      <td>69.0</td>
      <td>92.0</td>
    </tr>
    <tr>
      <th>Queens Park Rangers</th>
      <td>NaN</td>
      <td>37.0</td>
      <td>25.0</td>
      <td>NaN</td>
      <td>30.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>



Export the pandas version to a json file that can be accessed by vizier


```python
pd_data.to_json(orient="index",path_or_buf ="mpl.json")
```


```python

```
